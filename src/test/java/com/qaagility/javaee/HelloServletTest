package com.qaagility.javaee;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import static org.junit.Assert.*;
import static org.mockito.Mockito.*;
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import com.qaagility.javaee.HelloServlet;
public class HelloServletTest{
  
   
  @Test
  public void testServlet(){
        when(request.getParameter("yourName")).thenReturn("Subhasis");
        when(request.getParameter("password")).thenReturn("secret");
        StringWriter stringWriter = new StringWriter();
        PrintWriter writer = new PrintWriter(stringWriter);
        when(response.getWriter()).thenReturn(writer);

        new MyServlet().doPost(request, response);

        verify(request, atLeast(1)).getParameter("username"); // only if you want to verify username was called...
        writer.flush(); // it may not have been flushed yet...
        assertTrue(writer.toString().contains("Subhasis"));
  }
  /*
  
  @Test
  public void testFailedName(){
     when(request.getParameter("yourName")).thenReturn("WrongName");
        when(request.getParameter("password")).thenReturn("secret");
        StringWriter stringWriter = new StringWriter();
        PrintWriter writer = new PrintWriter(stringWriter);
        when(response.getWriter()).thenReturn(writer);

        new MyServlet().doPost(request, response);

        verify(request, atLeast(1)).getParameter("username"); // only if you want to verify username was called...
        writer.flush(); // it may not have been flushed yet...
        assertTrue(writer.toString().contains("Subhasis"));
  } */
  
}
